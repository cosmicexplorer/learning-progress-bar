cargo_subproject(
  name='terminal-rust',
  generated_resources=[
    'src/terminal_wrapper_bindings.h',
    'thrift_ffi/thrift_ffi_bindings.h',
  ],
  features=['cffi_compatible'],
  cargo_output_file='libterminal_wrapper.dylib',
  sources=rglobs('*'),
  cargo_subprojects=[
    'thrift_ffi',
  ],
  dependencies=[
    '//:rust-toolchain',
    'terminal/thrift:rust',
  ],
)

python_library(
  name='terminal-python',
  dependencies=[
    '3rdparty/python:cffi',
    '3rdparty/python:pants',
    '3rdparty/python:thrift',
    '3rdparty/python:setuptools-floating',
    ':terminal-rust',
    'terminal/thrift:python',
  ],
)

python_binary(
  name='bin',
  entry_point='event_loop:main',
  dependencies=[
    ':terminal-python',
  ],
)
